<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™êµ ì‹ë‹¨í‘œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F8F9FA; /* Neutral Light */
            color: #343A40; /* Neutral Dark */
        }
        .container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 1.5rem;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .table-header {
            background-color: #007BFF; /* Primary Blue */
            color: white;
            font-weight: 600;
            padding: 0.75rem 1rem;
            text-align: center;
        }
        .table-cell {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #E0E0E0; /* Light Gray Border */
            text-align: center;
        }
        .table-row:nth-child(even) {
            background-color: #F0F8FF; /* Lightest Blue */
        }
        .table-row:hover {
            background-color: #E0F2FE; /* Slightly darker light blue on hover */
            cursor: pointer;
        }
        .table-row.selected {
            background-color: #ADD8E6; /* Light Blue for selection */
            font-weight: 500;
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .btn-primary {
            background-color: #007BFF; /* Primary Blue */
            color: white;
        }
        .btn-primary:hover {
            background-color: #0056b3; /* Darker Blue on hover */
        }
        .btn-tertiary {
            background-color: #28A745; /* Green for new action */
            color: white;
        }
        .btn-tertiary:hover {
            background-color: #218838; /* Darker Green on hover */
        }
        .message-box {
            background-color: #E0F2FE;
            border: 1px solid #007BFF;
            color: #073B4C;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1.5rem;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1rem;
            white-space: pre-wrap; /* Preserve newlines */
            word-break: break-word; /* Break long words */
        }
        .menu-input-group input, .menu-input-group select {
            padding: 0.75rem;
            border: 1px solid #D1D5DB;
            border-radius: 0.375rem;
            font-size: 1rem;
            width: 100%;
        }
        .menu-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        .summary-table-container {
            margin-top: 2rem;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.05);
        }
        .summary-table th, .summary-table td {
            padding: 0.75rem;
            text-align: center;
            border-bottom: 1px solid #E0E0E0;
        }
        .summary-table thead {
            background-color: #5CACEE; /* Secondary Blue */
            color: white;
        }
        .summary-table tbody tr:nth-child(even) {
            background-color: #F0F8FF;
        }
        .admin-section.locked .menu-input-group input,
        .admin-section.locked .menu-input-group button:not(#adminLoginBtn) {
            pointer-events: none;
            opacity: 0.6;
            background-color: #e9ecef;
        }
        .admin-section.locked #setTodayMenusBtn {
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-2xl font-bold text-center mb-6 text-[#073B4C]" id="mainTitle">ë‚ ì§œë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.</h1>
        <p class="mb-4 text-center text-gray-700">
            ì•„ë˜ëŠ” í•™ìƒë“¤ì˜ í•™ë…„, ì´ë¦„, ê·¸ë¦¬ê³  ë©”ë‰´ ì„ íƒì„ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” í‘œì…ë‹ˆë‹¤. ë¨¼ì € ë‚ ì§œì™€ ì‹ì‚¬ ì‹œê°„ëŒ€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.
        </p>

        <div class="flex justify-center items-center space-x-4 mb-6">
            <label for="menuDate" class="font-bold text-lg">ë‚ ì§œ:</label>
            <input type="date" id="menuDate" class="p-2 border rounded text-lg">
            
            <label for="mealType" class="font-bold text-lg">ì‹ì‚¬:</label>
            <select id="mealType" class="p-2 border rounded text-lg">
                <option value="breakfast">ì•„ì¹¨</option>
                <option value="lunch" selected>ì ì‹¬</option>
                <option value="dinner">ì €ë…</option>
            </select>
        </div>

        <div class="mt-8 mb-6 admin-section locked">
            <h2 class="text-xl font-bold text-center mb-4 text-[#073B4C]">ë©”ë‰´ ê´€ë¦¬ì</h2>
            <div class="flex justify-center items-center space-x-2 mb-4">
                <input type="password" id="adminPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" class="p-2 border rounded w-48">
                <button id="adminLoginBtn" class="btn btn-primary">ë©”ë‰´ ê´€ë¦¬ì ë¡œê·¸ì¸</button>
            </div>
            
            <div id="adminMenuInput" class="menu-input-group">
                <p class="text-center text-gray-700">
                    ì•„ë˜ì— ì„ íƒëœ ë‚ ì§œì™€ ì‹ì‚¬ ì‹œê°„ëŒ€ì— ì œê³µë  ë©”ë‰´ 4ê°€ì§€ë¥¼ ì…ë ¥í•˜ê³ , 'ë©”ë‰´ ì„¤ì •' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
                </p>
                <input type="text" id="menuInput1" placeholder="ë©”ë‰´ 1 (ì˜ˆ: ëˆê¹ŒìŠ¤)">
                <input type="text" id="menuInput2" placeholder="ë©”ë‰´ 2 (ì˜ˆ: ê¹€ì¹˜ì°Œê°œ)">
                <input type="text" id="menuInput3" placeholder="ë©”ë‰´ 3 (ì˜ˆ: ë¶ˆê³ ê¸°ë®ë°¥)">
                <input type="text" id="menuInput4" placeholder="ë©”ë‰´ 4 (ì˜ˆ: ë‹­ê°ˆë¹„)">
                <div class="flex justify-center">
                    <button id="setTodayMenusBtn" class="btn btn-tertiary">ë©”ë‰´ ì„¤ì • ğŸ“</button>
                </div>
            </div>
        </div>

        <div class="overflow-x-auto rounded-lg border border-gray-200 mb-6">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-[#007BFF]">
                    <tr>
                        <th scope="col" class="table-header rounded-tl-lg">ë²ˆí˜¸</th>
                        <th scope="col" class="table-header">í•™ë…„</th>
                        <th scope="col" class="table-header">ì´ë¦„</th>
                        <th scope="col" class="table-header rounded-tr-lg">ì„ íƒ ë©”ë‰´</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200" id="studentTableBody">
                </tbody>
            </table>
        </div>
        
        <div id="menuSummaryTableContainer" class="summary-table-container hidden">
            <h2 class="text-xl font-bold text-center mb-4 text-[#073B4C]">ë©”ë‰´ë³„ ì„ íƒ í˜„í™©</h2>
            <table class="min-w-full summary-table divide-y divide-gray-200">
                <thead>
                    <tr>
                        <th>ë©”ë‰´</th>
                        <th>ì„ íƒ í•™ìƒ ìˆ˜</th>
                    </tr>
                </thead>
                <tbody id="menuSummaryTableBody">
                </tbody>
            </table>
        </div>

        <div id="messageBox" class="message-box">
            ë‚ ì§œì™€ ì‹ì‚¬ ì‹œê°„ëŒ€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.
        </div>
    </div>

    <script type="module">
        // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const mainTitle = document.getElementById('mainTitle');
        const menuDateInput = document.getElementById('menuDate');
        const mealTypeSelect = document.getElementById('mealType');
        const studentTableBody = document.getElementById('studentTableBody');
        const adminSection = document.querySelector('.admin-section');
        const adminPasswordInput = document.getElementById('adminPassword');
        const adminLoginBtn = document.getElementById('adminLoginBtn');
        const setTodayMenusBtn = document.getElementById('setTodayMenusBtn');
        const menuInput1 = document.getElementById('menuInput1');
        const menuInput2 = document.getElementById('menuInput2');
        const menuInput3 = document.getElementById('menuInput3');
        const menuInput4 = document.getElementById('menuInput4');
        const messageBox = document.getElementById('messageBox');
        const menuSummaryTableContainer = document.getElementById('menuSummaryTableContainer');
        const menuSummaryTableBody = document.getElementById('menuSummaryTableBody');

        // ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ
        const ADMIN_PASSWORD = '1234'; // ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
        let students = [
            { id: 1, grade: '1í•™ë…„', name: 'ê¹€ë¯¼ì¤€', selectedMenu: {} },
            { id: 2, grade: '2í•™ë…„', name: 'ì´ì„œìœ¤', selectedMenu: {} },
            { id: 3, grade: '3í•™ë…„', name: 'ë°•ì§€í›„', selectedMenu: {} },
            { id: 4, grade: '1í•™ë…„', name: 'ìµœì˜ˆë‚˜', selectedMenu: {} },
            { id: 5, grade: '4í•™ë…„', name: 'ì •í•˜ì¤€', selectedMenu: {} },
            { id: 6, grade: '5í•™ë…„', name: 'ê°•ì„œì•„', selectedMenu: {} },
            { id: 7, grade: '6í•™ë…„', name: 'ì¡°ì€ìš°', selectedMenu: {} },
            { id: 8, grade: '1í•™ë…„', name: 'ìœ¤ë„í˜„', selectedMenu: {} },
            { id: 9, grade: '2í•™ë…„', name: 'ì¥ìœ ì§„', selectedMenu: {} },
            { id: 10, grade: '3í•™ë…„', name: 'í•œì§€í›ˆ', selectedMenu: {} },
            { id: 11, grade: '4í•™ë…„', name: 'ì˜¤ìˆ˜ì•„', selectedMenu: {} },
            { id: 12, grade: '5í•™ë…„', name: 'ê¹€ì¤€ì„œ', selectedMenu: {} },
            { id: 13, grade: '6í•™ë…„', name: 'ì´í•˜ìœ¤', selectedMenu: {} },
            { id: 14, grade: '1í•™ë…„', name: 'ë°•ì„œì¤€', selectedMenu: {} },
            { id: 15, grade: '2í•™ë…„', name: 'ìµœì•„ë¦°', selectedMenu: {} },
            { id: 16, grade: '3í•™ë…„', name: 'ì •ìš°ì§„', selectedMenu: {} },
            { id: 17, grade: '4í•™ë…„', name: 'ê°•ì±„ì›', selectedMenu: {} },
            { id: 18, grade: '5í•™ë…„', name: 'ì¡°ì‹œìš°', selectedMenu: {} },
            { id: 19, grade: '6í•™ë…„', name: 'ìœ¤ì§€ìš°', selectedMenu: {} },
            { id: 20, grade: '1í•™ë…„', name: 'ì¥ë„ìœ¤', selectedMenu: {} },
            { id: 21, grade: '2í•™ë…„', name: 'í•œì„œí˜„', selectedMenu: {} },
            { id: 22, grade: '3í•™ë…„', name: 'ì˜¤ë¯¼ì¤€', selectedMenu: {} },
            { id: 23, grade: '4í•™ë…„', name: 'ê¹€ê°€ì€', selectedMenu: {} },
            { id: 24, grade: '5í•™ë…„', name: 'ì´ì¤€ìš°', selectedMenu: {} },
            { id: 25, grade: '6í•™ë…„', name: 'ë°•í•˜ì€', selectedMenu: {} },
            { id: 26, grade: '1í•™ë…„', name: 'ìµœì‹œí˜„', selectedMenu: {} },
            { id: 27, grade: '2í•™ë…„', name: 'ì •ì†Œìœ¨', selectedMenu: {} },
            { id: 28, grade: '3í•™ë…„', name: 'ê°•ìŠ¹ë¯¼', selectedMenu: {} },
        ];
        // 'YYYY-MM-DD_mealType': ['ë©”ë‰´1', 'ë©”ë‰´2', 'ë©”ë‰´3', 'ë©”ë‰´4'] í˜•ì‹ìœ¼ë¡œ ë©”ë‰´ ì €ì¥
        let savedDailyMenus = JSON.parse(localStorage.getItem('savedDailyMenus')) || {};
        let selectedStudentRow = null; // í˜„ì¬ ì„ íƒëœ í…Œì´ë¸” í–‰ì— ëŒ€í•œ ì°¸ì¡°

        // í˜„ì¬ ë‚ ì§œì™€ ì‹ì‚¬ ì‹œê°„ì— ë§ëŠ” ì˜¤ëŠ˜ì˜ ë©”ë‰´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        function getTodayMenus() {
            const dateKey = menuDateInput.value;
            const mealType = mealTypeSelect.value;
            const key = `${dateKey}_${mealType}`;
            return savedDailyMenus[key] || [];
        }

        // í•™ìƒ í…Œì´ë¸”ì„ ë Œë”ë§í•©ë‹ˆë‹¤.
        function renderStudentTable() {
            studentTableBody.innerHTML = ''; // ê¸°ì¡´ í–‰ì„ ì§€ì›ë‹ˆë‹¤.
            const currentMenus = getTodayMenus();
            const dateKey = menuDateInput.value;
            const mealType = mealTypeSelect.value;

            students.forEach((student, index) => {
                const row = document.createElement('tr');
                row.classList.add('table-row');
                row.dataset.rowIndex = index; // ì‰¬ìš´ ì¡°íšŒë¥¼ ìœ„í•´ ì¸ë±ìŠ¤ ì €ì¥

                // í•´ë‹¹ í•™ìƒì˜ í˜„ì¬ ë‚ ì§œ/ì‹ì‚¬ ì‹œê°„ëŒ€ì— ëŒ€í•œ ì„ íƒ ë©”ë‰´
                const currentStudentSelectedMenu = student.selectedMenu[`${dateKey}_${mealType}`] || '';

                row.innerHTML = `
                    <td class="table-cell">${student.id}</td>
                    <td class="table-cell">${student.grade}</td>
                    <td class="table-cell">${student.name}</td>
                    <td class="table-cell menu-cell">${currentStudentSelectedMenu || 'ì„ íƒ ì•ˆ í•¨'}</td>
                `;
                studentTableBody.appendChild(row);
            });
            // ì´ì „ì— ì„ íƒëœ í–‰ì´ ìˆë‹¤ë©´ ë‹¤ì‹œ ì ìš©í•©ë‹ˆë‹¤.
            if (selectedStudentRow) {
                const currentSelectedRowIndex = parseInt(selectedStudentRow.dataset.rowIndex);
                const newSelectedRow = studentTableBody.querySelector(`[data-row-index="${currentSelectedRowIndex}"]`);
                if (newSelectedRow) {
                    newSelectedRow.classList.add('selected');
                    selectedStudentRow = newSelectedRow; // ì°¸ì¡° ì—…ë°ì´íŠ¸
                } else {
                    selectedStudentRow = null; // í–‰ì´ ë” ì´ìƒ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´
                }
            }
        }

        // íŠ¹ì • í–‰ì— ëŒ€í•œ ë©”ë‰´ ì„ íƒ ë“œë¡­ë‹¤ìš´ì„ ë Œë”ë§í•©ë‹ˆë‹¤.
        function renderMenuSelectionDropdown(rowIndex) {
            const row = studentTableBody.querySelector(`[data-row-index="${rowIndex}"]`);
            if (!row) return;

            const menuCell = row.querySelector('.menu-cell');
            const currentMenus = getTodayMenus();
            const dateKey = menuDateInput.value;
            const mealType = mealTypeSelect.value;
            const currentStudentSelectedMenu = students[rowIndex].selectedMenu[`${dateKey}_${mealType}`] || '';

            const selectElement = document.createElement('select');
            selectElement.classList.add('p-1', 'border', 'rounded', 'w-full');

            // ê¸°ë³¸ "ë©”ë‰´ ì„ íƒ" ì˜µì…˜ ì¶”ê°€
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = 'ë©”ë‰´ ì„ íƒ';
            selectElement.appendChild(defaultOption);

            // currentMenusì—ì„œ ì˜µì…˜ ì¶”ê°€
            currentMenus.forEach(menu => {
                const option = document.createElement('option');
                option.value = menu;
                option.textContent = menu;
                if (menu === currentStudentSelectedMenu) {
                    option.selected = true;
                }
                selectElement.appendChild(option);
            });

            // ë“œë¡­ë‹¤ìš´ ë³€ê²½ ì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            selectElement.addEventListener('change', (event) => {
                const newMenu = event.target.value;
                students[rowIndex].selectedMenu[`${dateKey}_${mealType}`] = newMenu;
                renderStudentTable(); // ì—…ë°ì´íŠ¸ëœ ë©”ë‰´ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•´ í…Œì´ë¸” ë‹¤ì‹œ ë Œë”ë§
                updateSummaryTable(); // ìš”ì•½ ì—…ë°ì´íŠ¸
            });

            // ì…€ ë‚´ìš©ì„ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ êµì²´
            menuCell.innerHTML = '';
            menuCell.appendChild(selectElement);
            selectElement.focus(); // ì¦‰ì‹œ ì„ íƒì„ ìœ„í•´ ë“œë¡­ë‹¤ìš´ì— í¬ì»¤ìŠ¤
        }

        // ë©”ë‰´ ìš”ì•½ í…Œì´ë¸”ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
        function updateSummaryTable() {
            menuSummaryTableBody.innerHTML = ''; // ê¸°ì¡´ í–‰ì„ ì§€ì›ë‹ˆë‹¤.

            const currentMenus = getTodayMenus();
            const dateKey = menuDateInput.value;
            const mealType = mealTypeSelect.value;

            const menuCounts = {};
            currentMenus.forEach(menu => {
                menuCounts[menu] = 0; // ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ë©”ë‰´ì˜ ì¹´ìš´íŠ¸ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”
            });

            students.forEach(student => {
                const studentSelectedMenu = student.selectedMenu[`${dateKey}_${mealType}`];
                if (studentSelectedMenu && menuCounts.hasOwnProperty(studentSelectedMenu)) {
                    menuCounts[studentSelectedMenu]++;
                }
            });

            if (currentMenus.length > 0) {
                menuSummaryTableContainer.classList.remove('hidden');
                for (const menu in menuCounts) {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${menu}</td>
                        <td>${menuCounts[menu]}ëª…</td>
                    `;
                    menuSummaryTableBody.appendChild(row);
                }
            } else {
                menuSummaryTableContainer.classList.add('hidden');
            }
        }

        // ë©”ì¸ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
        function updateMainTitle() {
            const date = menuDateInput.value;
            const mealType = mealTypeSelect.options[mealTypeSelect.selectedIndex].text;
            if (date) {
                const dateObj = new Date(date);
                const month = dateObj.getMonth() + 1;
                const day = dateObj.getDate();
                mainTitle.textContent = `${month}ì›” ${day}ì¼ì˜ ${mealType} ì‹ë‹¨`;
            } else {
                mainTitle.textContent = 'ë‚ ì§œë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.';
            }
        }

        // ê´€ë¦¬ì ë¡œê·¸ì¸ ë²„íŠ¼ ì´ë²¤íŠ¸
        adminLoginBtn.addEventListener('click', () => {
            if (adminPasswordInput.value === ADMIN_PASSWORD) {
                adminSection.classList.remove('locked');
                messageBox.innerHTML = 'ë©”ë‰´ ê´€ë¦¬ì ë¡œê·¸ì¸ ì„±ê³µ! ì´ì œ ì˜¤ëŠ˜ì˜ ë©”ë‰´ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
                messageBox.style.justifyContent = 'center';
                adminPasswordInput.value = ''; // ë¹„ë°€ë²ˆí˜¸ í•„ë“œ ì´ˆê¸°í™”
            } else {
                messageBox.innerHTML = 'ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.';
                messageBox.style.justifyContent = 'center';
            }
        });

        // "ë©”ë‰´ ì„¤ì •" ë²„íŠ¼ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        setTodayMenusBtn.addEventListener('click', () => {
            const dateKey = menuDateInput.value;
            const mealType = mealTypeSelect.value;

            if (!dateKey) {
                messageBox.innerHTML = 'ë‚ ì§œë¥¼ ë¨¼ì € ì„ íƒí•´ ì£¼ì„¸ìš”.';
                messageBox.style.justifyContent = 'center';
                return;
            }

            const inputs = [
                menuInput1.value.trim(),
                menuInput2.value.trim(),
                menuInput3.value.trim(),
                menuInput4.value.trim()
            ];
            const newMenus = inputs.filter(menu => menu !== ''); // ë¹„ì–´ìˆì§€ ì•Šì€ ë©”ë‰´ë§Œ ì €ì¥

            if (newMenus.length === 0) {
                messageBox.innerHTML = 'ìµœì†Œ í•œ ê°€ì§€ ì´ìƒì˜ ë©”ë‰´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                messageBox.style.justifyContent = 'center';
                return;
            }

            const key = `${dateKey}_${mealType}`;
            savedDailyMenus[key] = newMenus; // í•´ë‹¹ ë‚ ì§œì™€ ì‹ì‚¬ ì‹œê°„ëŒ€ì˜ ë©”ë‰´ ì €ì¥
            localStorage.setItem('savedDailyMenus', JSON.stringify(savedDailyMenus)); // LocalStorageì— ì €ì¥

            // í•´ë‹¹ ë‚ ì§œ/ì‹ì‚¬ ì‹œê°„ëŒ€ì— ëŒ€í•œ í•™ìƒë“¤ì˜ ê¸°ì¡´ ì„ íƒ ì´ˆê¸°í™” (ìƒˆ ë©”ë‰´ë¡œ ì¸í•´)
            students.forEach(student => {
                student.selectedMenu[key] = '';
            });

            renderStudentTable(); // ì—…ë°ì´íŠ¸ëœ ë©”ë‰´ë¡œ í…Œì´ë¸” ë‹¤ì‹œ ë Œë”ë§
            updateSummaryTable(); // ìƒˆ ë©”ë‰´ (ì¹´ìš´íŠ¸ 0)ë¡œ ìš”ì•½ ì—…ë°ì´íŠ¸

            messageBox.innerHTML = `ì„ íƒëœ ë‚ ì§œì™€ ì‹ì‚¬ ì‹œê°„ëŒ€ì˜ ë©”ë‰´ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ í•™ìƒì„ í´ë¦­í•˜ì—¬ ë©”ë‰´ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            messageBox.style.justifyContent = 'center';
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            menuInput1.value = '';
            menuInput2.value = '';
            menuInput3.value = '';
            menuInput4.value = '';
        });

        // ë‚ ì§œ ë˜ëŠ” ì‹ì‚¬ ì‹œê°„ëŒ€ ë³€ê²½ ì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        menuDateInput.addEventListener('change', () => {
            updateMainTitle();
            renderStudentTable();
            updateSummaryTable();
            messageBox.innerHTML = 'í•™ìƒì„ í´ë¦­í•˜ì—¬ ë©”ë‰´ë¥¼ ì„ íƒí•˜ê±°ë‚˜, ê´€ë¦¬ì ì„¹ì…˜ì—ì„œ ë©”ë‰´ë¥¼ ì„¤ì •í•´ ì£¼ì„¸ìš”.';
            messageBox.style.justifyContent = 'center';
        });

        mealTypeSelect.addEventListener('change', () => {
            updateMainTitle();
            renderStudentTable();
            updateSummaryTable();
            messageBox.innerHTML = 'í•™ìƒì„ í´ë¦­í•˜ì—¬ ë©”ë‰´ë¥¼ ì„ íƒí•˜ê±°ë‚˜, ê´€ë¦¬ì ì„¹ì…˜ì—ì„œ ë©”ë‰´ë¥¼ ì„¤ì •í•´ ì£¼ì„¸ìš”.';
            messageBox.style.justifyContent = 'center';
        });

        // í…Œì´ë¸” í–‰ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ì„ íƒ ë° ë©”ë‰´ ë“œë¡­ë‹¤ìš´)
        studentTableBody.addEventListener('click', (event) => {
            let row = event.target.closest('tr');
            if (row && row.parentNode === studentTableBody) {
                if (selectedStudentRow) {
                    selectedStudentRow.classList.remove('selected');
                }
                selectedStudentRow = row;
                selectedStudentRow.classList.add('selected');

                const rowIndex = parseInt(row.dataset.rowIndex);
                const currentMenus = getTodayMenus();
                
                // í˜„ì¬ ë‚ ì§œ/ì‹ì‚¬ ì‹œê°„ëŒ€ì— ë©”ë‰´ê°€ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´ ë“œë¡­ë‹¤ìš´ ë Œë”ë§
                if (currentMenus.length > 0) {
                    renderMenuSelectionDropdown(rowIndex);
                    messageBox.innerHTML = `<strong>${students[rowIndex].name}</strong> í•™ìƒì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ë©”ë‰´ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ë³€ê²½í•´ ì£¼ì„¸ìš”.`;
                } else {
                    messageBox.innerHTML = `<strong>${students[rowIndex].name}</strong> í•™ìƒì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ë¨¼ì € ê´€ë¦¬ìê°€ í•´ë‹¹ ë‚ ì§œì™€ ì‹ì‚¬ ì‹œê°„ëŒ€ì˜ ë©”ë‰´ë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.`;
                }
                messageBox.style.justifyContent = 'center';
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ì„¤ì •
        document.addEventListener('DOMContentLoaded', () => {
            // ì˜¤ëŠ˜ ë‚ ì§œë¡œ ê¸°ë³¸ ì„¤ì •
            const today = new Date();
            const year = today.getFullYear();
            const month = (today.getMonth() + 1).toString().padStart(2, '0');
            const day = today.getDate().toString().padStart(2, '0');
            menuDateInput.value = `${year}-${month}-${day}`;
            
            updateMainTitle(); // ì´ˆê¸° ì œëª© ì„¤ì •
            renderStudentTable(); // ì´ˆê¸° í…Œì´ë¸” ë Œë”ë§
            updateSummaryTable(); // ì´ˆê¸° ìš”ì•½ ë Œë”ë§
        });
    </script>
</body>
</html>